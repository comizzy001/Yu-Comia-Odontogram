<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YU Dental Clinic â€“ Patient Information</title>

<style>
body {
  font-family: Arial, Helvetica, sans-serif;
  background:#f4f4f4;
  margin:0;
  padding:20px;
}

.form-container {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:20px;
  border:2px solid #000;
}

.header {
  text-align:center;
  margin-bottom:15px;
}

.header h2 {
  margin:5px 0;
}

.small {
  font-size:12px;
}

.section {
  border-top:1px solid #000;
  padding-top:10px;
  margin-top:10px;
}

.section-title {
  font-weight:bold;
  margin-bottom:8px;
}

.row {
  display:flex;
  gap:10px;
  margin-bottom:6px;
}

.row > div {
  flex:1;
}

label {
  font-size:13px;
}

input[type="text"],
input[type="date"],
input[type="number"],
textarea {
  width:100%;
  border:1px solid #000;
  padding:4px;
  font-size:13px;
}

textarea {
  resize:none;
}

.checkbox-group {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:5px;
  font-size:13px;
}

.inline {
  display:flex;
  gap:15px;
  align-items:center;
}

.signature-box {
  border:1px solid #000;
  height:120px;
  cursor:crosshair;
}

.signature-row {
  display: flex;
  gap: 15px;
  align-items: flex-start;
}

.signature-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}


.signature-label {
  font-size:12px;
  margin-top:5px;
}

button {
  margin-top:15px;
  padding:10px 15px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="form-container">

  <div class="header">
  <h2>YU-COMIA DENTAL CLINIC</h2>
  <div class="small">DENTAL CHART</div>
</div>


  <!-- PATIENT INFO -->
<div class="section">
  <div class="section-title">PERSONAL INFORMATION</div>

  <div class="section">
    <div class="row">
      <div><label>Patient No.</label><input type="text" id="patientNo"></div>
      <div><label>Date</label><input type="date" id="visitDate"></div>
    </div>

    <div class="row">
      <div><label>Last Name</label><input type="text" id="lastName"></div>
      <div><label>First Name</label><input type="text" id="firstName"></div>
      <div><label>Middle Name</label><input type="text" id="middleName"></div>
    </div>

    <div class="row">
      <div><label>Birthday</label><input type="date" id="birthday"></div>
      <div><label>Age</label><input type="number" id="age"></div>
      <div><label>Nickname</label><input type="text" id="nickname"></div>
      <div>
        <label>Gender</label>
        <div class="inline">
          <label><input type="radio" name="gender" value="Male"> Male</label>
          <label><input type="radio" name="gender" value="Female"> Female</label>
        </div>
      </div>
    </div>

    <label>Address</label>
    <textarea rows="2" id="address"></textarea>

    <div class="row">
      <div><label>City / Province</label><input type="text" id="address2"></div>
      <div><label>ZIP</label><input type="text" id="zip"></div>
      <div><label>Contact No.</label><input type="text" id="contact"></div>
    </div>

    <div class="row">
      <div><label>Email</label><input type="text" id="email"></div>
      <div>
        <label>Religion</label>
        <input type="text" id="religion">
      </div>
      <div>
        <label>Civil Status</label>
        <div class="inline">
          <label><input type="radio" name="status" value="Married"> Married</label>
          <label><input type="radio" name="status" value="Single"> Single</label>
          <label><input type="radio" name="status" value="Divorced"> Divorced</label>
          <label><input type="radio" name="status" value="Widowed"> Widowed</label>
        </div>
      </div>
    </div>

    <div class="row">
      <div><label>Occupation</label><input type="text" id="occupation"></div>
      <div><label>Emergency Contact</label><input type="text" id="emergencyContact"></div>
      <div><label>Contact No.</label><input type="text" id="emergencyContactNo"></div>
    </div>
  </div>

  <!-- DENTAL HISTORY -->
  <div class="section">
  <div class="section-title">DENTAL HISTORY</div>

  <div class="row">
    <div>
      <label>Previous Dentist</label>
      <input type="text" id="previousDentist">
    </div>
    <div>
      <label>Last Dental Visit</label>
      <input type="date" id="lastDentalVisit">
    </div>
  </div>
</div>



<!-- MEDICAL HISTORY -->
<div class="section"> 
  <div class="section-title">MEDICAL HISTORY</div>

  <div class="row">
    <div>
      <label>Name of Physician: Dr.</label>
      <input type="text" id="physicianName">
    </div>
    <div>
      <label>Specialty, if applicable:</label>
      <input type="text" id="physicianSpecialty">
    </div>
  </div>

  <div class="row">
    <div>
      <label>Office Address:</label>
      <input type="text" id="physicianAddress">
    </div>
    <div>
      <label>Office No.:</label>
      <input type="text" id="physicianOfficeNo">
    </div>
  </div>

  <!-- Yes / No Questions -->
  <table style="width:100%; font-size:13px; border-collapse:collapse;">
    <tr>
      <th style="text-align:left;">&nbsp;</th>
      <th>Yes</th>
      <th>No</th>
    </tr>

    <tr>
      <td>1. Are you in good health?</td>
      <td><input type="checkbox" id="goodHealthYes"></td>
      <td><input type="checkbox" id="goodHealthNo"></td>
    </tr>

    <tr>
      <td>2. Are you under medical treatment now?</td>
      <td><input type="checkbox" id="underTreatmentYes"></td>
      <td><input type="checkbox" id="underTreatmentNo"></td>
    </tr>

    <tr>
      <td colspan="3">If so, what is the condition being treated?
        <input type="text" id="treatmentCondition">
      </td>
    </tr>

    <tr>
      <td>3. Have you ever had a serious illness or surgical operation?</td>
      <td><input type="checkbox" id="seriousIllnessYes"></td>
      <td><input type="checkbox" id="seriousIllnessNo"></td>
    </tr>

    <tr>
      <td colspan="3">If so, what illness or operation?
        <input type="text" id="illnessDetails">
      </td>
    </tr>

    <tr>
      <td>4. Have you ever been hospitalized?</td>
      <td><input type="checkbox" id="hospitalizedYes"></td>
      <td><input type="checkbox" id="hospitalizedNo"></td>
    </tr>

    <tr>
      <td colspan="3">If so, when and why?
        <input type="text" id="hospitalDetails">
      </td>
    </tr>

    <tr>
      <td>5. Are you taking any prescription/non-prescription medication?</td>
      <td><input type="checkbox" id="takingMedicationYes"></td>
      <td><input type="checkbox" id="takingMedicationNo"></td>
    </tr>

    <tr>
      <td colspan="3">If so, please specify:
        <input type="text" id="medicationDetails">
      </td>
    </tr>

    <tr>
      <td>6. Do you use tobacco products?</td>
      <td><input type="checkbox" id="tobaccoUseYes"></td>
      <td><input type="checkbox" id="tobaccoUseNo"></td>
    </tr>

    <tr>
      <td>7. Do you use alcohol, cocaine or other dangerous drugs?</td>
      <td><input type="checkbox" id="drugUseYes"></td>
      <td><input type="checkbox" id="drugUseNo"></td>
    </tr>
  </table>

  <!-- Allergies -->
  <label style="margin-top:10px;">8. Are you allergic to any of the following:</label>
  <div class="inline">
    <label><input type="checkbox" class="allergy" value="Local Anesthetic"> Local Anesthetic (ex. Lidocaine)</label>
    <label><input type="checkbox" class="allergy" value="Penicillin / Antibiotics"> Penicillin / Antibiotics</label>
    <label><input type="checkbox" class="allergy" value="Sulfa Drugs"> Sulfa Drugs</label>
    <label><input type="checkbox" class="allergy" value="Aspirin"> Aspirin</label>
    <label><input type="checkbox" class="allergy" value="Latex"> Latex</label>
    <label><input type="checkbox" class="allergy" value="Others"> Others</label>
  </div>

  <label>Bleeding Time:</label>
  <input type="text" id="bleedingTime">

  <!-- Women Only -->
  <label style="margin-top:10px;">10. For women only:</label>
  <div class="inline">
    <label>Are you pregnant? <input type="checkbox" id="pregnantYes"> Yes <input type="checkbox" id="pregnantNo"> No</label>
    <label>Are you nursing? <input type="checkbox" id="nursingYes"> Yes <input type="checkbox" id="nursingNo"> No</label>
    <label>Are you taking birth control pills? <input type="checkbox" id="birthControlYes"> Yes <input type="checkbox" id="birthControlNo"> No</label>
  </div>

  <div class="row">
    <div>
      <label>11. Blood Type:</label>
      <input type="text" id="bloodType">
    </div>
    <div>
      <label>12. Blood Pressure:</label>
      <input type="text" id="bloodPressure">
    </div>
  </div>
</div>


 <!-- Health Conditions -->
<label style="margin-top:10px;">
  13. Do you have or have you had any of the following? (Check all that apply)
</label>

<div class="checkbox-group" style="grid-template-columns: repeat(3, 1fr);">

 <!-- Column 1 -->
<label><input type="checkbox" class="illness" value="High Blood Pressure"> High Blood Pressure</label>
<label><input type="checkbox" class="illness" value="Low Blood Pressure"> Low Blood Pressure</label>
<label><input type="checkbox" class="illness" value="Epilepsy / Convulsions"> Epilepsy / Convulsions</label>
<label><input type="checkbox" class="illness" value="AIDS / HIV Infection"> AIDS / HIV Infection</label>
<label><input type="checkbox" class="illness" value="Sexually Transmitted Diseases"> Sexually Transmitted Diseases</label>
<label><input type="checkbox" class="illness" value="Stomach Troubles / Ulcers"> Stomach Troubles / Ulcers</label>
<label><input type="checkbox" class="illness" value="Fainting Seizure"> Fainting Seizure</label>
<label><input type="checkbox" class="illness" value="Rapid Weight Loss"> Rapid Weight Loss</label>
<label><input type="checkbox" class="illness" value="Radiation Therapy"> Radiation Therapy</label>
<label><input type="checkbox" class="illness" value="Joint Replacement / Implant"> Joint Replacement / Implant</label>
<label><input type="checkbox" class="illness" value="Heart Surgery"> Heart Surgery</label>
<label><input type="checkbox" class="illness" value="Heart Attack"> Heart Attack</label>
<label><input type="checkbox" class="illness" value="Thyroid Problem"> Thyroid Problem</label>

<!-- Column 2 -->
<label><input type="checkbox" class="illness" value="Heart Disease"> Heart Disease</label>
<label><input type="checkbox" class="illness" value="Heart Murmur"> Heart Murmur</label>
<label><input type="checkbox" class="illness" value="Hepatitis / Liver Disease"> Hepatitis / Liver Disease</label>
<label><input type="checkbox" class="illness" value="Rheumatic Fever"> Rheumatic Fever</label>
<label><input type="checkbox" class="illness" value="Hay Fever / Allergies"> Hay Fever / Allergies</label>
<label><input type="checkbox" class="illness" value="Respiratory Problems"> Respiratory Problems</label>
<label><input type="checkbox" class="illness" value="Hepatitis / Jaundice"> Hepatitis / Jaundice</label>
<label><input type="checkbox" class="illness" value="Tuberculosis"> Tuberculosis</label>
<label><input type="checkbox" class="illness" value="Swollen Ankles"> Swollen Ankles</label>
<label><input type="checkbox" class="illness" value="Kidney Disease"> Kidney Disease</label>
<label><input type="checkbox" class="illness" value="Diabetes"> Diabetes</label>
<label><input type="checkbox" class="illness" value="Chest Pain"> Chest Pain</label>
<label><input type="checkbox" class="illness" value="Stroke"> Stroke</label>

<!-- Column 3 -->
<label><input type="checkbox" class="illness" value="Cancer / Tumors"> Cancer / Tumors</label>
<label><input type="checkbox" class="illness" value="Anemia"> Anemia</label>
<label><input type="checkbox" class="illness" value="Angina"> Angina</label>
<label><input type="checkbox" class="illness" value="Asthma"> Asthma</label>
<label><input type="checkbox" class="illness" value="Emphysema"> Emphysema</label>
<label><input type="checkbox" class="illness" value="Bleeding Problems"> Bleeding Problems</label>
<label><input type="checkbox" class="illness" value="Blood Diseases"> Blood Diseases</label>
<label><input type="checkbox" class="illness" value="Head Injuries"> Head Injuries</label>
<label><input type="checkbox" class="illness" value="Arthritis / Rheumatism"> Arthritis / Rheumatism</label>

<!-- Others -->
<label style="grid-column: span 3;">
  <input type="checkbox" class="illness" value="Others"> Others:
  <input type="text" id="otherIllness" style="width:70%; margin-left:5px;">
</label>


</div>




  <!-- SIGNATURE 
  <div class="section">
    <div class="section-title">SIGNATURE</div>

    <label>Patient Signature</label>
    <canvas id="sig" class="signature-box"></canvas>
    <div class="signature-label">Sign above using mouse or finger</div>

    <button onclick="clearSig()">Clear Signature</button>
  </div>

</div>-->

<label>Patient Signature</label>

<div class="signature-row">
  <canvas id="sig" class="signature-box"></canvas>

  <div class="signature-actions">
    <a href="Odontograph.html">
    <button type="button">ðŸ¦· Open Odontograph</button></a>
    <button type="button" onclick="clearSig()">Clear Signature</button>
  </div>
</div>

<div class="signature-label">Sign above using mouse or finger</div>


<script>
const canvas = document.getElementById("sig");
const ctx = canvas.getContext("2d");
let drawing = false;

canvas.width = canvas.offsetWidth;
canvas.height = canvas.offsetHeight;

canvas.addEventListener("mousedown", () => drawing = true);
canvas.addEventListener("mouseup", () => {
  drawing = false;
  ctx.beginPath();
});
canvas.addEventListener("mousemove", draw);

function draw(e) {
  if (!drawing) return;
  ctx.lineWidth = 2;
  ctx.lineCap = "round";
  ctx.strokeStyle = "#000";
  ctx.lineTo(e.offsetX, e.offsetY);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(e.offsetX, e.offsetY);
}

function clearSig() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

function getSignature() {
  return canvas.toDataURL();
}

function loadSignature(dataUrl) {
  if (!dataUrl) return;
  const img = new Image();
  img.onload = () => ctx.drawImage(img, 0, 0);
  img.src = dataUrl;
}
</script>


<script>
document.addEventListener("DOMContentLoaded", loadFormDraft);
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function generatePDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  const id = patientNo.value;
  const patient = getPatients().find(p => p.patientNo == id);

  if (!patient) {
    alert("Patient not found. Save the record first.");
    return;
  }

  pdf.setFontSize(14);
  pdf.text("YU Dental Clinic â€“ Patient Information", 20, 20);

  pdf.setFontSize(10);
  pdf.text(`Patient No: ${patient.patientNo}`, 20, 30);
  pdf.text(`Name: ${patient.lastName}, ${patient.firstName}`, 20, 36);
  pdf.text(`Birthday: ${patient.birthday}`, 20, 42);
  pdf.text(`Gender: ${patient.gender}`, 20, 48);
  pdf.text(`Address: ${patient.address}`, 20, 54);

  pdf.text("Dental History:", 20, 64);
  pdf.text(`Previous Dentist: ${patient.previousDentist}`, 25, 70);
  pdf.text(`Last Dental Visit: ${patient.lastDentalVisit}`, 25, 76);


  pdf.text("Medical Conditions:", 20, 86);
  let y = 92;
  patient.illnesses.forEach(i => {
    pdf.text(`â€¢ ${i}`, 25, y);
    y += 5;
  });

  if (patient.signature) {
    pdf.text("Signature:", 20, y + 10);
    pdf.addImage(patient.signature, "PNG", 20, y + 15, 60, 25);
  }

  if (patient.odontographImage) {
  pdf.addPage();
  pdf.setFontSize(14);
  pdf.text("Odontograph", 20, 20);
  pdf.addImage(patient.odontogram.image, "PNG", 15, 30, 180, 220);
  }

  pdf.save(`Patient_${patient.patientNo}.pdf`);

  if (patient.odontogram?.image) {
  pdf.addImage(
    patient.odontogram.image,
    "PNG",
    10,
    currentY,
    180,
    220
  );
}

}
</script>

<button type="button" onclick="savePatient()">ðŸ’¾ Save Patient</button>
<button type="button" onclick="window.location='index.html'">â¬… Back</button>
<button type="button" onclick="generatePDF()">ðŸ–¨ Generate PDF</button>


<script src="app.js"></script>

<script>
function openOdontograph() {
  window.open("odontograph.html", "_blank");
}
</script>


</body>
</html>


